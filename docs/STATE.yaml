# STATE.yaml v6.0-claude-optimized
# λ=limitation φ=file ∇=implement ∅=missing †=workaround ‡=critical ✓=native

∞STATUS:
  MODE: everything_server[tools+resources+prompts✓]
  BUILD: go build -o bin/cowpilot cmd/cowpilot/main.go
  RUN: ./bin/cowpilot
  TEST: npx @modelcontextprotocol/inspector ./bin/cowpilot
  FIXED: [resource_handler→[]mcp.ResourceContents,prompt_Arguments→map[string]string,MimeType→MIMEType]✓
  
λMCP-GO:
  VERSION: v0.34.1-0.20250715114859-baa715326fab
  ∅MISSING: [SetCompletionHandler,SetLoggingHandler,ProgressNotifications]
  ✓EXISTS: [NewMCPServer,AddTool,AddResource,AddResourceTemplate,AddPrompt,ServeStdio,NewSSEServer]
  
∇TOOLS[11]:
  hello→"Hello,World!"
  echo[message:string]→"Echo:$message"
  add[a,b:number]→a+b
  get_time[format?:unix|iso|human]→time.Now()
  base64_encode[text:string]→base64(text)
  base64_decode[data:string]→decode(data)
  string_operation[text,operation:upper|lower|reverse|length]→transform(text)
  format_json[json:string,minify?:bool]→prettify|minify
  long_running_operation[duration?,steps?:number]→simulate_progress
  get_test_image[]→ImageContent{base64,image/png}
  get_resource_content[uri]→EmbeddedResource{TextResourceContents|BlobResourceContents}

✓RESOURCES[4]:
  example://text/hello→TextResourceContents{text/plain}
  example://text/readme→TextResourceContents{text/markdown}
  example://image/logo→BlobResourceContents{image/png}
  example://dynamic/{id}→TextResourceContents{application/json}[template]

✓PROMPTS[2]:
  simple_greeting→PromptMessage{user:greeting_request}
  code_review[language,code:required]→PromptMessage{user:review_request}

✓NATIVE_SUPPORT:
  RESOURCES: ✓native{AddResource,AddResourceTemplate,WithResourceCapabilities}
  PROMPTS: ✓native{AddPrompt,WithPromptCapabilities}
  COMPLETIONS: ∅not_implemented
  LOGGING: ∅not_implemented
  PROGRESS: ∅not_implemented[λno_api]

φMAIN: /Users/vcto/Projects/cowpilot/cmd/cowpilot/main.go
  PATTERN_TOOL: s.AddTool(mcp.NewTool(name,opts...),handler)
  PATTERN_MULTI: &mcp.CallToolResult{Content:[]interface{}{TextContent{},ImageContent{}}}
  PATTERN_ERROR: mcp.NewToolResultError(msg),nil
  PATTERN_EMBED: EmbeddedResource{Type:"resource",Resource:TextResourceContents{URI,MimeType,Text}}

‡DECISIONS:
  ✓LIBRARY: mcp-go[native_support]→tools+resources+prompts
  ✓APPROACH: native_api_usage>no_workarounds_needed
  RATIONALE: library_supports_features+clean_implementation
  
‡BLOCKERS:
  1. λmcp-go∅[completions,logging,progress]
  2. ✓resources+prompts=native
  3. ∅protocol_compliance[mostly_complete]

SAMPLE_DATA:
  RES: {
    "example://text/hello": "Hello,World!This is a simple text resource from the everything server.",
    "example://text/readme": "# Everything Server\n\nThis is an example MCP server...",
    "example://image/logo": "iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg=="
  }
  PROMPTS: {
    "simple_greeting": {args:∅,msg:"Please provide a friendly greeting for a new user joining our community."},
    "code_review": {args:{language:required,code:required},msg:"Please review the following $language code..."}
  }

∇NEXT:
  TEST: [∀tool∈TOOLS:verify_functionality,error_cases,multi_content,embedded_resources]
  DECIDE: [accept_limitations|fork_mcp-go|custom_impl|find_alternative]
  ENHANCE: [+tools,+examples,+docs,?auth,?ratelimit,?metrics]
  
‡VERIFY:
  ✓tools.len==11
  ✓echo("test")=="Echo: test"
  ✓add(2,3)==5
  ✓string_operation("hello","upper")=="HELLO"
  ✓base64_encode("test")==base64_decode("dGVzdA==")
  ✓get_test_image().Content[1].Type=="image"
  ✓resources.list().includes("example://text/hello")
  ✓prompts.get("code_review",{language:"go",code:"..."}).includes("review")
  ✓get_resource_content("example://image/logo").Content[1].Type=="resource"
  ✓FIXED: resource_handlers→return[]mcp.ResourceContents[interface]

≈CONTEXT[next_session]:
  WHERE: cowpilot/cmd/cowpilot/main.go[everything_server,11_tools,✓native_resources,✓native_prompts]
  WHAT: mcp-go[native_support]→resources+prompts+tools
  WHY: library_actually_supports_these_features
  HOW: native_AddResource+AddPrompt,fixed_handler_signatures
  BLOCKERS: λmcp-go_missing[completions,logging,progress]
  OPTIONS: [implement_completions|add_logging|test_comprehensive|accept_current]
  FIXED: resource_handler_signature_mismatch✓